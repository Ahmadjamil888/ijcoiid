{"entities":{"User":{"$schema":"http://json-schema.org/draft-07/schema#","title":"User","type":"object","description":"Represents a user of the Pipeline AI platform.","properties":{"id":{"type":"string","description":"Unique identifier for the user entity."},"email":{"type":"string","description":"Email address of the user.","format":"email"},"displayName":{"type":"string","description":"Display name of the user."},"photoURL":{"type":"string","description":"URL of the user's profile photo.","format":"uri"},"projects":{"type":"array","description":"References to projects. (Relationship: User 1:N Project)","items":{"type":"string"}}},"required":["id","email"]},"Project":{"$schema":"http://json-schema.org/draft-07/schema#","title":"Project","type":"object","description":"Represents an AI project created by a user.","properties":{"id":{"type":"string","description":"Unique identifier for the project entity."},"userId":{"type":"string","description":"Reference to User. (Relationship: User 1:N Project)"},"name":{"type":"string","description":"Name of the project."},"taskType":{"type":"string","description":"Type of AI task (e.g., NLP, CV, Audio, Tabular)."},"goal":{"type":"string","description":"Goal of the project described in natural language."},"datasetId":{"type":"string","description":"Reference to Dataset. (Relationship: Project 1:1 Dataset)"},"pipelineIds":{"type":"array","description":"References to Pipelines. (Relationship: Project 1:N Pipeline)","items":{"type":"string"}},"modelIds":{"type":"array","description":"References to Models. (Relationship: Project 1:N Model)","items":{"type":"string"}}},"required":["id","userId","name","taskType","goal"]},"Pipeline":{"$schema":"http://json-schema.org/draft-07/schema#","title":"Pipeline","type":"object","description":"Represents an ML pipeline.","properties":{"id":{"type":"string","description":"Unique identifier for the pipeline entity."},"projectId":{"type":"string","description":"Reference to Project. (Relationship: Project 1:N Pipeline)"},"name":{"type":"string","description":"Name of the pipeline."},"nodes":{"type":"array","description":"serialized structure of the pipeline","items":{"type":"string"}}},"required":["id","projectId","name","nodes"]},"PipelineRun":{"$schema":"http://json-schema.org/draft-07/schema#","title":"PipelineRun","type":"object","description":"Represents a single execution of an ML pipeline.","properties":{"id":{"type":"string","description":"Unique identifier for the pipeline run entity."},"pipelineId":{"type":"string","description":"Reference to Pipeline. (Relationship: Pipeline 1:N PipelineRun)"},"status":{"type":"string","description":"Status of the pipeline run (e.g., running, completed, failed)."},"startTime":{"type":"string","description":"Timestamp indicating when the pipeline run started.","format":"date-time"},"endTime":{"type":"string","description":"Timestamp indicating when the pipeline run ended.","format":"date-time"},"logIds":{"type":"array","description":"References to Logs. (Relationship: PipelineRun 1:N Log)","items":{"type":"string"}},"modelId":{"type":"string","description":"Reference to Model. (Relationship: PipelineRun 1:1 Model)"}},"required":["id","pipelineId","status","startTime"]},"Model":{"$schema":"http://json-schema.org/draft-07/schema#","title":"Model","type":"object","description":"Represents a trained ML model.","properties":{"id":{"type":"string","description":"Unique identifier for the model entity."},"projectId":{"type":"string","description":"Reference to Project. (Relationship: Project 1:N Model)"},"name":{"type":"string","description":"Name of the model."},"modelVersionIds":{"type":"array","description":"References to ModelVersions. (Relationship: Model 1:N ModelVersion)","items":{"type":"string"}}},"required":["id","projectId","name"]},"ModelVersion":{"$schema":"http://json-schema.org/draft-07/schema#","title":"ModelVersion","type":"object","description":"Represents a specific version of a trained ML model.","properties":{"id":{"type":"string","description":"Unique identifier for the model version entity."},"modelId":{"type":"string","description":"Reference to Model. (Relationship: Model 1:N ModelVersion)"},"version":{"type":"number","description":"Version number of the model."},"metrics":{"type":"string","description":"metrics of the model","format":"json"},"storagePath":{"type":"string","description":"storage path of the model","format":"uri"}},"required":["id","modelId","version"]},"Dataset":{"$schema":"http://json-schema.org/draft-07/schema#","title":"Dataset","type":"object","description":"Represents a dataset used for training ML models.","properties":{"id":{"type":"string","description":"Unique identifier for the dataset entity."},"name":{"type":"string","description":"Name of the dataset."},"source":{"type":"string","description":"Source of the dataset (e.g., Hugging Face, Kaggle, URL)."},"version":{"type":"string","description":"Version of the dataset."},"schema":{"type":"string","description":"Schema of the dataset","format":"json"}},"required":["id","name","source"]},"Log":{"$schema":"http://json-schema.org/draft-07/schema#","title":"Log","type":"object","description":"Represents a log entry generated during a pipeline run.","properties":{"id":{"type":"string","description":"Unique identifier for the log entity."},"pipelineRunId":{"type":"string","description":"Reference to PipelineRun. (Relationship: PipelineRun 1:N Log)"},"timestamp":{"type":"string","description":"Timestamp of the log entry.","format":"date-time"},"message":{"type":"string","description":"Log message."},"level":{"type":"string","description":"Log level (e.g., INFO, WARNING, ERROR)."}},"required":["id","pipelineRunId","timestamp","message","level"]}},"auth":{"providers":["password","anonymous","google.com","github.com"]},"firestore":{"structure":[{"path":"/users/{userId}","definition":{"entityName":"User","schema":{"$ref":"#/backend/entities/User"},"description":"Stores user profiles. Only the user or an admin can access their data.","params":[{"name":"userId","description":"The unique identifier for the user."}]}},{"path":"/users/{userId}/projects/{projectId}","definition":{"entityName":"Project","schema":{"$ref":"#/backend/entities/Project"},"description":"Represents projects owned by a specific user. Includes denormalized 'userId' for authorization independence.","params":[{"name":"userId","description":"The unique identifier for the user."},{"name":"projectId","description":"The unique identifier for the project."}]}},{"path":"/users/{userId}/projects/{projectId}/pipelines/{pipelineId}","definition":{"entityName":"Pipeline","schema":{"$ref":"#/backend/entities/Pipeline"},"description":"Represents pipelines within a project. Includes denormalized 'userId' and 'projectId' for authorization independence.","params":[{"name":"userId","description":"The unique identifier for the user."},{"name":"projectId","description":"The unique identifier for the project."},{"name":"pipelineId","description":"The unique identifier for the pipeline."}]}},{"path":"/users/{userId}/projects/{projectId}/pipeline_runs/{pipelineRunId}","definition":{"entityName":"PipelineRun","schema":{"$ref":"#/backend/entities/PipelineRun"},"description":"Represents runs of a pipeline. Includes denormalized 'userId', 'projectId', and 'pipelineId' for authorization independence.","params":[{"name":"userId","description":"The unique identifier for the user."},{"name":"projectId","description":"The unique identifier for the project."},{"name":"pipelineRunId","description":"The unique identifier for the pipeline run."}]}},{"path":"/users/{userId}/projects/{projectId}/models/{modelId}","definition":{"entityName":"Model","schema":{"$ref":"#/backend/entities/Model"},"description":"Represents models within a project. Includes denormalized 'userId' and 'projectId' for authorization independence.","params":[{"name":"userId","description":"The unique identifier for the user."},{"name":"projectId","description":"The unique identifier for the project."},{"name":"modelId","description":"The unique identifier for the model."}]}},{"path":"/users/{userId}/projects/{projectId}/models/{modelId}/model_versions/{modelVersionId}","definition":{"entityName":"ModelVersion","schema":{"$ref":"#/backend/entities/ModelVersion"},"description":"Represents specific versions of a model. Includes denormalized 'userId', 'projectId', and 'modelId' for authorization independence.","params":[{"name":"userId","description":"The unique identifier for the user."},{"name":"projectId","description":"The unique identifier for the project."},{"name":"modelId","description":"The unique identifier for the model."},{"name":"modelVersionId","description":"The unique identifier for the model version."}]}},{"path":"/users/{userId}/projects/{projectId}/datasets/{datasetId}","definition":{"entityName":"Dataset","schema":{"$ref":"#/backend/entities/Dataset"},"description":"Represents datasets used in a project. Includes denormalized 'userId' and 'projectId' for authorization independence.","params":[{"name":"userId","description":"The unique identifier for the user."},{"name":"projectId","description":"The unique identifier for the project."},{"name":"datasetId","description":"The unique identifier for the dataset."}]}},{"path":"/users/{userId}/projects/{projectId}/pipeline_runs/{pipelineRunId}/logs/{logId}","definition":{"entityName":"Log","schema":{"$ref":"#/backend/entities/Log"},"description":"Represents logs for a pipeline run. Includes denormalized 'userId', 'projectId', 'pipelineId', and 'pipelineRunId' for authorization independence.","params":[{"name":"userId","description":"The unique identifier for the user."},{"name":"projectId","description":"The unique identifier for the project."},{"name":"pipelineRunId","description":"The unique identifier for the pipeline run."},{"name":"logId","description":"The unique identifier for the log entry."}]}}],"reasoning":"The Firestore data structure is designed to support the Pipeline AI platform's requirements for user authentication, project management, ML pipeline creation, model training, and deployment. The structure prioritizes authorization independence and scalability.  \n\nAuthorization Independence:  Authorization independence is achieved by using path-based ownership and denormalizing user IDs where necessary. This eliminates the need for `get()` calls in security rules, allowing for atomic operations and simplifying debugging.\n\nQAPs (Rules are not Filters): The structure enables secure `list` operations by segregating data based on ownership. Each collection is designed with a homogeneous security posture, ensuring that all documents within a collection share the same access requirements.\n\n*   `/users/{userId}`: Stores user profiles, ensuring only the user or an admin can access their data.  \n*   `/users/{userId}/projects/{projectId}`: Represents projects owned by a specific user. The `userId` field within the project document facilitates ownership-based security rules.\n*   `/users/{userId}/projects/{projectId}/pipelines/{pipelineId}`: Represents pipelines within a project. The `userId` and `projectId` fields in the pipeline document are denormalized to maintain authorization independence.\n*   `/users/{userId}/projects/{projectId}/pipeline_runs/{pipelineRunId}`: Represents runs of a pipeline. `userId`, `projectId`, and `pipelineId` are denormalized for authorization.\n*   `/users/{userId}/projects/{projectId}/models/{modelId}`: Represents models within a project. `userId` and `projectId` are denormalized for authorization.\n*   `/users/{userId}/projects/{projectId}/models/{modelId}/model_versions/{modelVersionId}`: Represents specific versions of a model. `userId`, `projectId`, and `modelId` are denormalized for authorization.\n*   `/users/{userId}/projects/{projectId}/datasets/{datasetId}`: Represents datasets used in a project. `userId` and `projectId` are denormalized for authorization.\n*   `/users/{userId}/projects/{projectId}/pipeline_runs/{pipelineRunId}/logs/{logId}`: Represents logs for a pipeline run. `userId`, `projectId`, `pipelineId`, and `pipelineRunId` are denormalized for authorization."}}